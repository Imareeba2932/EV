<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>EV Failure Form Prediction</title>
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" />
    <style>
        body { padding: 24px; }
        .container { max-width: 1100px; }
        .grid { display: grid; grid-template-columns: repeat(2, minmax(260px, 1fr)); gap: 12px; }
        .actions { margin-top: 16px; }
    </style>
</head>
<body>
    <div class="container">
        <h1 class="mb-3">EV Failure Prediction (Form)</h1>

        {% with messages = get_flashed_messages() %}
          {% if messages %}
            <div class="alert alert-warning">
              {% for message in messages %}
                <div>{{ message }}</div>
              {% endfor %}
            </div>
          {% endif %}
        {% endwith %}

        <form action="{{ url_for('form_predict') }}" method="post">
            <div class="grid">
                {% for feat, itype in feature_types.items() %}
                    <div>
                        <label class="form-label">{{ feat }}</label>
                        {% if options and options.get(feat) %}
                            <select class="form-select" name="{{ feat }}">
                                {% for opt in options.get(feat) %}
                                    <option value="{{ opt }}" {% if defaults and defaults.get(feat) == opt %}selected{% endif %}>{{ opt }}</option>
                                {% endfor %}
                            </select>
                        {% else %}
                            <input class="form-control" name="{{ feat }}" type="{{ itype }}" step="any" value="{{ defaults.get(feat, '') }}" />
                        {% endif %}
                    </div>
                {% endfor %}
            </div>
            <div class="actions">
                <button class="btn btn-primary" type="submit">Predict</button>
                <a class="btn btn-link" href="{{ url_for('index') }}">Back to Home</a>
            </div>
        </form>

        {% if result %}
            <div class="alert alert-info mt-3">
                <div><strong>Prediction:</strong> {{ result.prediction }}</div>
                <div><strong>Failure probability:</strong> {{ '%.4f'|format(result.probability) }}</div>
            </div>
        {% endif %}
    </div>
</body>
</html>


